{% extends "wrappers/wrapper.html" %}

{% load staticfiles %}
{% load website_extras %}

{% block page_css %}
    <link href="{% static "DataTables/css/dataTables.bootstrap.min.css" %}" rel="stylesheet">
    <link href="{% static "DataTables/css/dataTables.responsive.min.css" %}" rel="stylesheet">
{% endblock %}
{% block content %}
<div class="container">
    <div class="row">
        <div class="col-md-12">
            <div class="well bs-component">                     
                
                <h4 class="filter-options" data-toggle="collapse" data-target="#playersFilter">
                    Filter Options
                    <img class="filter-collapsed" height="20" width="20" style="float: right"src="/static/images/forward-arrow.svg ">
                </h4>
                <form id="playersFilter" class="collapse" action="/games/" method="post">
                    {% csrf_token %}
                </form>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <h1>Players</h1>
        </div>
    </div>
    <div class="row">
        <div id='tableLoading' class="col-md-6 col-md-offset-3">
            <div class="progress">
                <div class="progress-bar progress-bar-striped active" role="progressbar"
                    aria-valuenow="40" aria-valuemin="0" aria-valuemax="100" style="width:100%">
                    Fetching Data
                </div>
            </div>
        </div>
        
        <div id="skatersTableContainer" class="col-md-12 table-responsive" style="display: none;"></div>
    </div>
</div>
{% endblock %}
{% block page_js %}
<script>
    $(document).ready(function() {
        $.ajax({
            url: "/players/skater_list_table/",
            error: function(ts) { alert(ts.responseText) }
        }).done(function(data) {
            getAjax(data);
        })
    });

    function getAjax(data) {
        $('#skatersTableContainer').html(data);
        $('#tableLoading').toggle();
        $('#skatersTableContainer').toggle();
        $('#playerList').DataTable({
            iDisplayLength: 15,
            order: [[ 9, "desc" ]],
            responsive: true
        });
    }
</script>
<script src="{% static "DataTables/js/jquery.dataTables.min.js" %}"></script>
<script src="{% static "DataTables/js/dataTables.bootstrap.min.js" %}"></script>
<script src="{% static "DataTables/js/dataTables.responsive.min.js" %}"></script>
{% endblock %}